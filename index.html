---
layout: default
title: Micro Tool
---

<script type="text/javascript">

    var $oAuthToken = getUrlVar('token');
    var $org = 'kinlane';
    var $repo = 'github-micro-tool';

    if($oAuthToken !='')
      {

      // Setting a cookie value
      Cookies.set('token', $oAuthToken);

      // Set with expiration
      // Cookies.set('token', $oAuth_Token, { expires: '01/01/2017' });

      }

    // Does token exist
    function checkToken()
      {
      $oAuthToken = Cookies.get('token');
      if($oAuthToken)
        {
        alert("The token is: " + $oAuthToken + '!');
        }
      else
        {
        alert("There is no token available!");
        }
      }

    // Test Access to Repo
    function testAccessToRepo()
      {
      $oAuthToken = Cookies.get('token');
      console.log($oAuthToken);

      var github = new Github({token: $oAuthToken,auth: "oauth"});
      var repo = github.getRepo($org,$repo);

      repo.getTree('gh-pages?recursive=true', function(err, tree) {

        console.log('1');

        $.each(tree, function(treeKey, treeValue) {

          console.log('2');

          $writepath = '_data/store.json';
          $feedJSON = "write!";
          $path = treeValue['path'];
          $sha = treeValue['sha'];

          //console.log($path + ' == ' + $writepath);

          repo.writemanual('gh-pages',$writepath, $feedJSON, 'Save', $sha, function(err) {});
          console.log("writing " + $writepath);

          });
        });

      }

</script>

<h1>Github Micro Tool</h1>
<p>Github provides a very powerful platform for developing applications. When you use the base Github platform, in conjunction with Github Pages, and the Github API--some pretty interest approaches to application deployment emerge.</p>
<p>I learned this approach from Development Seed while working with the White House to open up data across federal government agencies, but is an approach I have evolved, and improved upon while developing what I am calling Github micro tools.</p>
<p>My Github micro tools run 100% on Github, using Github Pages as the front-end, the Github repository as a backend, and the Github API as the communication between--with Github OAuth as the security gatekeeper of who can put the application to work.</p>
<p>I needed to use this approach across several different micro tools, so I thought I'd create a base template that I can use as forkable base for these tools I'm building, while also sharing the approach with others.</p>
<h2>Apps Running 100% On Github</h2>
<p>I like my apps like my APIs--small and reusable. Building applications that run entirely on Github makes sense, when you are trying to develop applications that anyone can fork and put to use under their own account--relying on Github to do all the heavy lifting. Each micro tool runs as a Github repository, which comes with all the benefits of Github like versioning, social coding, and much more. You can <a href="https://github.com/kinlane/github-micro-tool" target="_blank">fork this project on Github, and begin using within your Github user account or orgnization</a>.</p>
<h2>Github Pages As Application Front-End</h2>
<p>One of the interesting features Github provides with each repository is the ability to launch a simple static site using Github Pages. I use these static project sites to run all my API projects&nbsp;and have been evolving it to be a front-end for this approach to providing micro tools.</p>
<h2>Static Jekyll Application Front-End</h2>
<p><a href="https://jekyllrb.com/">Jekyll</a> provides a simple, static way to help tame the front-end of the applications we are building. The static content management system provides tools for managing the look and feel of an application, the pages within, and allow you to have a blog if you want. Additionally, Jekyll provides a YAML and JSON data core which when combined with Liquid and JavaScript, you can build some pretty interesting apps.</p>
<h2>Github API As An App Connector</h2>
<p>With the base of an application, I am using the Github API as the connector for reading and writing data and content to the base Github repository, in addition to relying&nbsp;on the native features available in Jekyll, and Liquid. The API allows any application to access its underlying data store, and when properly authenticated against allows for many interesting scenarios.</p>
<h2>Github OAuth for Authentication</h2>
<p>To allow this application interaction to securely occur I am relying on Github OAuth as the key. For this example, I am using a Github token retrieved from within any Github account, instead of using a proxy or service like OAuth.io because I want this solution to be forkable and self-contained. Your tokens will not give you access to this application, but if you fork it, your tokens will give you access to your forked version. All you do is pass it into this page with ?token=[your token here], and the API will allow writing to the underlying repository.</p>
<p>This is project is meant
<h2>Cookie.js To Store The OAuth Token</h2>
<p>Once the OAuth token is passed into the URL I use cookies.js to store the token for use across all pages of this micro tool. This approach helps prevent it being included in any links and passed between pages. Once each cookie expires, the user is required to pass another valid token in through the URL to set the cookie again, and open up API access to the applications backend. This is project is meant, and here is how you can test to see if the token has been received.</p>
<ul>
  <li><a href="#" onclick="checkToken(); return false;">Check If Token Exists</a></li>
</ul>
<h2>Github.js To Communicate With API</h2>
<p>With a valid OAuth token, I use Github.js as the client side JavaScript client for interacting with the Github API. While Github.js allows for using almost all available API endpoints, for most application functionality it will be just about reading and writing YAML and JSON files using repository paths. For application functionality, I will rely on Liquid for reading YAML and JSON data, and Github.js for writing of data to the underlying repo using the Github API.</p>
<ul>
  <li><a href="#" onclick="testAccessToRepo(); return false;">Check If We Can Write To Repo</a></li>
</ul>
<h2>Forkable Base For Apps That Run 100% On Github</h2>
<p>Hopefully this provides a base that can be used to demonstrate what is possible when you build applications on top of Github. I am going to fork it and build a simple prototype that reads and writes to a YAML file in the _data folder for the underlying repo, exploring what is possible when it comes to using Github as a data-driven micro tool platform.&nbsp;</p>
